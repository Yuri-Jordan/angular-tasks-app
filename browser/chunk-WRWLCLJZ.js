import{$ as dt,A as it,Aa as L,B as C,Ba as R,C as q,Ca as yt,D as A,E as j,Ea as N,F as Q,G as k,Ga as Mt,H as r,Ha as P,I as u,Ia as O,J as at,Ja as wt,K as S,Ka as V,L as nt,M as ot,Ma as Ft,N as rt,Na as Lt,O as $,Oa as Rt,P as E,Q as mt,Ra as Nt,Sa as Pt,W as lt,Y as st,_ as pt,ba as ct,ca as I,da as ft,ea as ut,fa as gt,ga as _t,h as U,ha as Ct,i as K,ia as kt,ja as St,k as W,ka as ht,l as X,la as Tt,m as Y,ma as vt,n as Z,na as Et,o as tt,oa as It,p as m,pa as Dt,q as _,qa as bt,r as v,ra as xt,s as et,sa as D,t as p,ta as b,u as l,ua as x,v as o,va as y,w as a,wa as M,x as d,xa as w,y as c,ya as g,z as f,za as F}from"./chunk-C7AOFPAZ.js";var z=class t{constructor(e){this.http=e}url="api/tasks";getItems(e,i,n,s,T,J){var G=new lt().set("pageIndex",e.pageIndex.toString()).set("pageSize",e.pageSize.toString()).set("sortColumn",i?i.active:n).set("sortOrder",i?i.direction:s);return J&&(G=G.set("filterColumn",T).set("filterQuery",J)),this.http.get(this.url,{params:G})}static \u0275fac=function(i){return new(i||t)(Y(st))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})};var Qt=()=>[10,20,50],$t=()=>["/tasks","new"],Bt=t=>["/tasks",t];function Jt(t,e){t&1&&(o(0,"p")(1,"em"),r(2,"Carregando..."),a()())}function Ut(t,e){t&1&&(o(0,"button",19),r(1,` Criar nova tarefa
`),a()),t&2&&l("routerLink",S(1,$t))}function Kt(t,e){t&1&&(o(0,"th",20),r(1,"ID"),a())}function Wt(t,e){if(t&1&&(o(0,"td",21),r(1),a()),t&2){let i=e.$implicit;m(),u(i.id)}}function Xt(t,e){t&1&&(o(0,"th",20),r(1,"T\xEDtulo"),a())}function Yt(t,e){if(t&1&&(o(0,"td",21)(1,"a",22),r(2),a()()),t&2){let i=e.$implicit;m(),l("routerLink",nt(2,Bt,i.id)),m(),u(i.titulo)}}function Zt(t,e){t&1&&(o(0,"th",20),r(1,"Descri\xE7\xE3o"),a())}function te(t,e){if(t&1&&(o(0,"td",21),r(1),a()),t&2){let i=e.$implicit;m(),u(i.descricao)}}function ee(t,e){t&1&&(o(0,"th",20),r(1,"Prazo"),a())}function ie(t,e){if(t&1&&(o(0,"td",21),r(1),ot(2,"date"),a()),t&2){let i=e.$implicit;m(),u(rt(2,1,i.dataVencimento,"dd/MM/yyyy"))}}function ae(t,e){t&1&&(o(0,"th",20),r(1,"Status"),a())}function ne(t,e){t&1&&(c(0),o(1,"span",24),r(2,"Feita"),a(),f())}function oe(t,e){t&1&&(c(0),o(1,"span",25),r(2,"Atrasada"),a(),f())}function re(t,e){t&1&&(o(0,"span",26),r(1,"Fazendo"),a())}function me(t,e){if(t&1&&p(0,oe,3,0,"ng-container",23)(1,re,2,0,"ng-template",null,1,$),t&2){let i=k(2),n=q().$implicit,s=q();l("ngIf",n.dataVencimento&&n.dataVencimento<s.HOJE)("ngIfElse",i)}}function le(t,e){if(t&1&&(o(0,"td",21),p(1,ne,3,0,"ng-container",23)(2,me,3,2,"ng-template",null,0,$),a()),t&2){let i=e.$implicit,n=k(3);m(),l("ngIf",i.tarefaCompletada)("ngIfElse",n)}}function se(t,e){t&1&&d(0,"tr",27)}function pe(t,e){t&1&&d(0,"tr",28)}var H=class t{constructor(e){this.taskService=e}tasks;paginator;sort;filterForm;displayedColumns=["id","titulo","descricao","dataVencimento","tarefaCompletada"];defaultFilterColumn="titulo";defaultSortColumn="titulo";defaultSortOrder="asc";HOJE=Date.now();filtro;ngOnInit(){this.filterForm=new w({titulo:new g("")}),this.monitorarFiltro(),this.loadData()}monitorarFiltro(){this.filterForm.get("titulo")?.valueChanges.pipe(U(1e3),K()).subscribe(e=>{this.loadData(e)})}loadData(e){var i=new Mt;i.pageIndex=0,i.pageSize=10,this.filtro=e,this.getData(i)}getData(e){e&&this.taskService.getItems(e,this.sort,this.defaultSortColumn,this.defaultSortOrder,this.defaultFilterColumn,this.filtro).subscribe(i=>{console.log(i),this.paginator.length=i.total,this.paginator.pageIndex=i.pageIndex,this.paginator.pageSize=i.pageSize,this.tasks=new It(i.items)})}static \u0275fac=function(i){return new(i||t)(_(z))};static \u0275cmp=v({type:t,selectors:[["app-task-list"]],viewQuery:function(i,n){if(i&1&&(A(P,5),A(O,5)),i&2){let s;j(s=Q())&&(n.paginator=s.first),j(s=Q())&&(n.sort=s.first)}},standalone:!1,decls:27,vars:14,consts:[["checkLate",""],["doing",""],[4,"ngIf"],["mat-flat-button","","color","primary","class","btn-add",3,"routerLink",4,"ngIf"],[3,"formGroup"],["form","",3,"hidden"],["matInput","","formControlName","titulo","placeholder","Busque pelo T\xEDtulo da tarefa"],[2,"width","100%","max-width","100vw","overflow","auto"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"matSortChange","dataSource","hidden","matSortActive","matSortDirection"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","titulo"],["matColumnDef","descricao"],["matColumnDef","dataVencimento"],["matColumnDef","tarefaCompletada"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"page","hidden","pageSize","pageSizeOptions"],["mat-flat-button","","color","primary",1,"btn-add",3,"routerLink"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],[4,"ngIf","ngIfElse"],[2,"color","green"],[2,"color","red"],[2,"color","orange"],["mat-header-row",""],["mat-row",""]],template:function(i,n){i&1&&(o(0,"h1"),r(1,"Listagem de tarefas"),a(),p(2,Jt,3,0,"p",2)(3,Ut,2,2,"button",3),o(4,"form",4)(5,"mat-form-field",5),d(6,"input",6),a()(),o(7,"div",7)(8,"table",8),C("matSortChange",function(){return n.loadData()}),c(9,9),p(10,Kt,2,0,"th",10)(11,Wt,2,1,"td",11),f(),c(12,12),p(13,Xt,2,0,"th",10)(14,Yt,3,4,"td",11),f(),c(15,13),p(16,Zt,2,0,"th",10)(17,te,2,1,"td",11),f(),c(18,14),p(19,ee,2,0,"th",10)(20,ie,3,4,"td",11),f(),c(21,15),p(22,ae,2,0,"th",10)(23,le,4,2,"td",11),f(),p(24,se,1,0,"tr",16)(25,pe,1,0,"tr",17),a(),o(26,"mat-paginator",18),C("page",function(T){return n.getData(T)}),a()()),i&2&&(m(2),l("ngIf",!n.tasks),m(),l("ngIf",n.tasks),m(),l("formGroup",n.filterForm),m(),l("hidden",!n.tasks),m(3),l("dataSource",n.tasks)("hidden",!n.tasks)("matSortActive",n.defaultSortColumn)("matSortDirection",n.defaultSortOrder),m(16),l("matHeaderRowDef",n.displayedColumns),m(),l("matRowDefColumns",n.displayedColumns),m(),l("hidden",!n.tasks)("pageSize",10)("pageSizeOptions",S(13,Qt)))},dependencies:[E,I,F,b,y,M,L,R,N,ut,_t,ht,Ct,gt,Tt,kt,St,vt,Et,P,O,wt,V,D,mt],styles:["table.mat-table[_ngcontent-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.btn-add[_ngcontent-%COMP%]{float:right}"]})};var de=()=>["/tasks"];function ce(t,e){t&1&&(o(0,"p")(1,"em"),r(2,"Carregando..."),a()())}function fe(t,e){t&1&&(o(0,"mat-error")(1,"strong"),r(2,"ERRO"),a(),r(3,": Uma tarefa com o mesmo "),o(4,"i"),r(5,"nome"),a(),r(6,", "),o(7,"i"),r(8,"lat"),a(),r(9,", "),o(10,"i"),r(11,"lon"),a(),r(12," e "),o(13,"i"),r(14,"pa\xEDs"),a(),r(15," j\xE1 existe. "),a())}function ue(t,e){t&1&&(o(0,"mat-error"),r(1," Titulo \xE9 obrigat\xF3rio. "),a())}function ge(t,e){t&1&&(o(0,"mat-error"),r(1," Descri\xE7\xE3o \xE9 obrigat\xF3ria. "),a())}var h=class t{constructor(e,i){this.activatedRoute=e;this.router=i}titulo;form;task;id;ngOnInit(){this.form=new w({titulo:new g("",x.required),descricao:new g("",x.required),dataVencimento:new g("",x.required),tarefaCompletada:new g(!1)}),this.loadData()}loadData(){var e=this.activatedRoute?.snapshot?.paramMap?.get("id");this.id=e?+e:0}onSubmit(){var e=this.id?this.task:{}}static \u0275fac=function(i){return new(i||t)(_(dt),_(ct))};static \u0275cmp=v({type:t,selectors:[["app-task-form"]],standalone:!1,decls:29,vars:12,consts:[["picker",""],[1,"task-edit"],[4,"ngIf"],[3,"ngSubmit","formGroup"],["matInput","","formControlName","titulo","required","","placeholder","Digite um t\xEDtulo"],["matInput","","formControlName","descricao","required","","placeholder","Digite uma descri\xE7\xE3o"],["formControlName","dataVencimento","matInput","",3,"matDatepicker"],["matIconSuffix","",3,"for"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["mat-flat-button","","color","secondary",3,"routerLink"]],template:function(i,n){if(i&1){let s=it();o(0,"div",1)(1,"h1"),r(2),a(),p(3,ce,3,0,"p",2),o(4,"form",3),C("ngSubmit",function(){return Z(s),tt(n.onSubmit())}),o(5,"p"),p(6,fe,16,0,"mat-error",2),a(),o(7,"mat-form-field")(8,"mat-label"),r(9,"Titulo:"),a(),d(10,"input",4),p(11,ue,2,0,"mat-error",2),a(),o(12,"mat-form-field")(13,"mat-label"),r(14,"Descri\xE7\xE3o:"),a(),d(15,"textarea",5),p(16,ge,2,0,"mat-error",2),a(),o(17,"mat-form-field")(18,"mat-label"),r(19,"Escolha uma data"),a(),d(20,"input",6)(21,"mat-datepicker-toggle",7)(22,"mat-datepicker",null,0),a(),o(24,"div")(25,"button",8),r(26),a(),o(27,"button",9),r(28," Cancelar "),a()()()()}if(i&2){let s=k(23);m(2),u(n.titulo),m(),l("ngIf",n.id&&!n.task),m(),l("formGroup",n.form),m(2),l("ngIf",n.form.invalid&&n.form.hasError("tarefaDuplicada")),m(5),l("ngIf",n.form.controls.titulo.errors==null?null:n.form.controls.titulo.errors.required),m(5),l("ngIf",n.form.controls.descricao.errors==null?null:n.form.controls.descricao.errors.required),m(4),l("matDatepicker",s),m(),l("for",s),m(4),l("disabled",!n.form.valid),m(),at(" ",n.id?"Atualizar":"Criar"," "),m(),l("routerLink",S(11,de))}},dependencies:[E,I,F,b,y,M,yt,L,R,N,V,D,Dt,bt,xt,Ft,Lt,Rt],styles:["table.mat-table[_ngcontent-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}"]})};var _e=[{path:"",component:H},{path:"new",component:h},{path:":id",component:h}],Ot=class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=et({type:t});static \u0275inj=X({imports:[Pt,Nt,ft.forChild(_e),pt]})};export{Ot as TasksModule};
